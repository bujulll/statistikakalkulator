<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="format-detection" content="telephone=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Kalkulator Statistik | StatEdu</title>
    <link rel="stylesheet" href="css/style.css">

</head>

<body class="kalkulator-body">
    <nav class="navbar">
        <a href="index.html" class="brand"><span>Stat</span><b>Edu.</b></a>
        <div class="menu" id="menu">
            <a href="index.html#hero">Home</a>
            <div class="menu-item has-submenu">
            <a href="index.html#materi" class="submenu-toggle" aria-haspopup="true" aria-expanded="false">Materi</a>
            <div class="submenu" aria-label="Submenu Materi">
                <a href="pemusatan-data.html">Ukuran Pemusatan Data</a>
                <a href="penyebaran-data.html">Ukuran Penyebaran Data</a>
            </div>
            </div>
            <a href="kalkulator.html">Kalkulator</a>
            <a href="quiz.html">Game Quiz</a>
        </div>
        <div class="hamburger" id="hamburger">
            <span></span>
            <span></span>
            <span></span>
        </div>
    </nav>
    <section class="kalkulator-hero" id="hero">
        <div class="kalkulator-hero-content">
            <h2>Kalkulator Statistik</h2>
            <div class="rumus">
                Pilih jenis data dan ukuran yang ingin dihitung:
            </div>
            <form id="calcForm" class="kalkulator-form">
                <label>
                    Jenis Data:<br>
                    <select id="jenisData">
                        <option value="tunggal">Data Tunggal</option>
                        <option value="kelompok">Data Kelompok</option>
                    </select>
                </label>
                <label>
                    Ukuran:<br>
                    <select id="jenisUkuran">
                        <option value="mean">Mean (Rata-rata)</option>
                        <option value="median">Median</option>
                        <option value="modus">Modus</option>
                        <option value="jangkauan">Jangkauan</option>
                        <option value="simpangan">Simpangan Rata-rata</option>
                        <option value="ragam">Ragam (Varians)</option>
                    </select>
                </label>
                <div id="inputTunggal">
                    <label>
                        Masukkan Data (pisahkan dengan koma):<br>
                        <input type="text" id="dataTunggal" placeholder="Contoh: 6,7,8,9,10">
                    </label>
                </div>
                <div id="inputKelompok" style="display:none;">
                    <label>Masukkan Kelas dan Frekuensi:</label>
                    <table id="tabelKelompok">
                        <tr>
                            <th>Kelas</th>
                            <th>Frekuensi</th>
                        </tr>
                        <tr>
                            <td><input type="text" class="kelas-input" placeholder="Contoh: 30-39"></td>
                            <td><input type="number" class="frek-input" min="0"></td>
                        </tr>
                        <tr>
                            <td><input type="text" class="kelas-input" placeholder="Contoh: 40-49"></td>
                            <td><input type="number" class="frek-input" min="0"></td>
                        </tr>
                        <tr>
                            <td><input type="text" class="kelas-input" placeholder="Contoh: 50-59"></td>
                            <td><input type="number" class="frek-input" min="0"></td>
                        </tr>
                    </table>
                    <button type="button" onclick="tambahBarisKelompok()" style="margin-bottom:8px;">+ Tambah
                        Baris</button>
                </div>
                <div class="kalkulator-actions">
                    <button type="button" class="calc-btn" onclick="hitungStatistik()">Hitung</button>
                    <button type="button" class="example-btn" onclick="isiContoh()">Gunakan Contoh</button>
                    <button type="button" class="reset-btn" onclick="resetFormKalkulator()">Reset</button>
                </div>
            </form>
            <div id="hasilKalkulator"></div>
            <div id="langkahKalkulator" style="margin-top:12px;"></div>
            <div class="modal-bg" id="modal-bg" onclick="hidePenjelasan()"></div>
            <div class="modal-penjelasan" id="modal-penjelasan">
                <h3 id="judulPenjelasan"></h3>
                <div id="isiPenjelasan"></div>
                <button onclick="hidePenjelasan()">Tutup</button>
            </div>
        </div>
    </section>
    <footer class="kalkulator-footer">
        <div class="kalkulator-footer-content">
            <div class="kalkulator-footer-brand">StatEdu.</div>
            <div class="kalkulator-footer-copy">&copy; 2025 StatEdu. All rights reserved.</div>
        </div>
    </footer>
    <script src="js/script.js"></script>
    <script>
        // Ganti input sesuai jenis data
        document.getElementById('jenisData').onchange = function () {
            if (this.value === 'tunggal') {
                document.getElementById('inputTunggal').style.display = '';
                document.getElementById('inputKelompok').style.display = 'none';
            } else {
                document.getElementById('inputTunggal').style.display = 'none';
                document.getElementById('inputKelompok').style.display = '';
            }
        };

        // Fungsi hitung statistik sederhana
        function hitungStatistik() {
            var jenis = document.getElementById('jenisData').value;
            var ukuran = document.getElementById('jenisUkuran').value;
            var hasil = '';
            var langkahHTML = '';
            if (jenis === 'tunggal') {
                var data = document.getElementById('dataTunggal').value.split(',').map(Number).filter(x => !isNaN(x));
                if (data.length === 0) {
                    hasil = 'Data tidak valid!';
                } else if (ukuran === 'mean') {
                    var mean = data.reduce((a, b) => a + b, 0) / data.length;
                    hasil = 'Mean = ' + mean.toFixed(2);
                    langkahHTML = '<b>Langkah:</b><br>Jumlah data = ' + data.join(' + ') + ' = ' + data.reduce((a,b)=>a+b,0) + '<br>Banyak data = ' + data.length + '<br>Mean = jumlah/banyak = ' + mean.toFixed(2);
                } else if (ukuran === 'median') {
                    data.sort((a, b) => a - b);
                    var n = data.length;
                    var median = n % 2 ? data[(n - 1) / 2] : (data[n / 2 - 1] + data[n / 2]) / 2;
                    hasil = 'Median = ' + median;
                    langkahHTML = '<b>Langkah:</b><br>Urutkan: [' + data.join(', ') + ']<br>n = ' + n + (n%2?('<br>Posisi median = (n+1)/2 = ' + ((n+1)/2)):('<br>Dua tengah = data ke-' + (n/2) + ' dan ke-' + (n/2+1))) + '<br>Median = ' + median;
                } else if (ukuran === 'modus') {
                    var freq = {};
                    data.forEach(x => freq[x] = (freq[x] || 0) + 1);
                    var max = Math.max(...Object.values(freq));
                    var modus = Object.keys(freq).filter(k => freq[k] == max).join(', ');
                    hasil = 'Modus = ' + modus;
                    langkahHTML = '<b>Langkah:</b><br>Frekuensi: ' + JSON.stringify(freq) + '<br>Frekuensi tertinggi = ' + max + '<br>Modus = ' + modus;
                } else if (ukuran === 'jangkauan') {
                    hasil = 'Jangkauan = ' + (Math.max(...data) - Math.min(...data));
                    langkahHTML = '<b>Langkah:</b><br>Max = ' + Math.max(...data) + ', Min = ' + Math.min(...data) + '<br>Jangkauan = Max - Min';
                } else if (ukuran === 'simpangan') {
                    var mean = data.reduce((a, b) => a + b, 0) / data.length;
                    var simp = data.reduce((a, b) => a + Math.abs(b - mean), 0) / data.length;
                    hasil = 'Simpangan Rata-rata = ' + simp.toFixed(2);
                    langkahHTML = '<b>Langkah:</b><br>Mean = ' + mean.toFixed(2) + '<br>Σ|xi - mean| = ' + data.map(x=> '|' + x + ' - ' + mean.toFixed(2) + '|').join(' + ') + '<br>Bagi dengan n = ' + data.length;
                } else if (ukuran === 'ragam') {
                    var mean = data.reduce((a, b) => a + b, 0) / data.length;
                    var ragam = data.reduce((a, b) => a + Math.pow(b - mean, 2), 0) / data.length;
                    hasil = 'Ragam = ' + ragam.toFixed(2);
                    langkahHTML = '<b>Langkah:</b><br>Mean = ' + mean.toFixed(2) + '<br>Σ(xi - mean)^2 = ' + data.map(x=> '(' + x + ' - ' + mean.toFixed(2) + ')^2').join(' + ') + '<br>Bagi dengan n = ' + data.length;
                }
            } else {
                // Data kelompok
                var kelas = [],
                    frek = [];
                var baris = document.querySelectorAll('#tabelKelompok tr');
                for (var i = 1; i < baris.length; i++) {
                    var kolomKelas = baris[i].querySelector('.kelas-input');
                    var kolomFrek = baris[i].querySelector('.frek-input');
                    if (kolomKelas && kolomFrek) {
                        var k = kolomKelas.value.trim();
                        var f = Number(kolomFrek.value);
                        if (k !== '' && !isNaN(f) && f > 0) {
                            kelas.push(k);
                            frek.push(f);
                        }
                    }
                }
                var n = frek.reduce((a, b) => a + b, 0);
                if (kelas.length === 0 || n === 0) {
                    hasil = 'Data kelompok tidak valid!';
                } else if (ukuran === 'mean') {
                    var xi = kelas.map(function (k) {
                        var ab = k.split('-').map(Number);
                        return (ab[0] + ab[1]) / 2;
                    });
                    var total = xi.map((x, i) => x * frek[i]).reduce((a, b) => a + b, 0);
                    hasil = 'Mean = ' + (total / n).toFixed(2);
                    langkahHTML = '<b>Langkah:</b><br>xi = nilai tengah kelas = ' + xi.map((x,i)=> kelas[i]+': '+x).join(', ') + '<br>Σ(fi×xi) = ' + xi.map((x,i)=> '('+frek[i]+'×'+x+')').join(' + ') + ' = ' + total.toFixed(2) + '<br>Σfi = ' + n + '<br>Mean = Σ(fi×xi)/Σfi = ' + (total/n).toFixed(2);
                } else if (ukuran === 'median') {
                    // Hitung median kelompok dengan L + [(n/2 - F)/f] × p
                    // Susun tabel kumulatif sederhana
                    var kum = [];
                    for (var i = 0; i < frek.length; i++) {
                        kum[i] = (i === 0 ? frek[0] : kum[i-1] + frek[i]);
                    }
                    var n2 = n / 2;
                    var idxMed = kum.findIndex(v => v >= n2);
                    var kelasMed = kelas[idxMed].split('-').map(Number);
                    var p = (kelasMed[1] - kelasMed[0]);
                    var L = kelasMed[0];
                    var F = idxMed > 0 ? kum[idxMed - 1] : 0;
                    var f = frek[idxMed];
                    var medianKel = L + ((n2 - F) / f) * p;
                    hasil = 'Median (kelompok) = ' + medianKel.toFixed(2);
                    langkahHTML = '<b>Langkah:</b><br>Buat kumulatif fi: [' + kum.join(', ') + '], n/2 = ' + n2 + '<br>Kelas median = ' + kelas[idxMed] + ' (fi=' + f + ', F=' + F + ', p=' + p + ')<br>Rumus: L + ((n/2 - F)/f) × p<br>Hasil = ' + medianKel.toFixed(2);
                } else if (ukuran === 'modus') {
                    var maxF = Math.max(...frek);
                    var idx = frek.indexOf(maxF);
                    hasil = 'Modus = kelas ' + kelas[idx];
                    langkahHTML = '<b>Langkah:</b><br>fi tertinggi = ' + maxF + ' pada kelas ' + kelas[idx];
                } else if (ukuran === 'jangkauan') {
                    var batasBawah = Number(kelas[0].split('-')[0]);
                    var batasAtas = Number(kelas[kelas.length - 1].split('-')[1]);
                    hasil = 'Jangkauan = ' + (batasAtas - batasBawah);
                    langkahHTML = '<b>Langkah:</b><br>Batas atas terakhir = ' + batasAtas + ', batas bawah pertama = ' + batasBawah + '<br>Jangkauan = selisih';
                } else if (ukuran === 'simpangan') {
                    var xi = kelas.map(function (k) {
                        var ab = k.split('-').map(Number);
                        return (ab[0] + ab[1]) / 2;
                    });
                    var mean = xi.map((x, i) => x * frek[i]).reduce((a, b) => a + b, 0) / n;
                    var simp = xi.map((x, i) => Math.abs(x - mean) * frek[i]).reduce((a, b) => a + b, 0) / n;
                    hasil = 'Simpangan Rata-rata = ' + simp.toFixed(2);
                    langkahHTML = '<b>Langkah:</b><br>Mean = ' + mean.toFixed(2) + '<br>Σ|xi - mean|×fi / Σfi = ' + simp.toFixed(2);
                } else if (ukuran === 'ragam') {
                    var xi = kelas.map(function (k) {
                        var ab = k.split('-').map(Number);
                        return (ab[0] + ab[1]) / 2;
                    });
                    var mean = xi.map((x, i) => x * frek[i]).reduce((a, b) => a + b, 0) / n;
                    var ragam = xi.map((x, i) => Math.pow(x - mean, 2) * frek[i]).reduce((a, b) => a + b, 0) / n;
                    hasil = 'Ragam = ' + ragam.toFixed(2);
                    langkahHTML = '<b>Langkah:</b><br>Mean = ' + mean.toFixed(2) + '<br>Σ(xi - mean)^2×fi / Σfi = ' + ragam.toFixed(2);
                }
            }
            document.getElementById('hasilKalkulator').innerText = hasil;
            document.getElementById('langkahKalkulator').innerHTML = langkahHTML;
        }

        function tambahBarisKelompok() {
            var tabel = document.getElementById('tabelKelompok');
            var row = tabel.insertRow(-1);
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            cell1.innerHTML = '<input type="text" class="kelas-input" placeholder="Contoh: 60-69">';
            cell2.innerHTML = '<input type="number" class="frek-input" min="0">';
        }

        function showPenjelasan() {
            var jenis = document.getElementById('jenisData').value;
            var ukuran = document.getElementById('jenisUkuran').value;
            var judul = '';
            var isi = '';
            if (ukuran === 'mean') {
                judul = 'Penjelasan Mean (Rata-rata)';
                isi = (jenis === 'tunggal') ?
                    '<b>Rumus:</b> Mean = (Jumlah seluruh data) / (Banyak data)<br><b>Contoh:</b> Data: 6,7,8,9,10<br>Mean = (6+7+8+9+10)/5 = 8' :
                    '<b>Rumus:</b> Mean = Σ(fi × xi) / Σfi<br><b>Contoh:</b> Kelas: 30-39, fi: 4; 40-49, fi: 6<br>xi = (30+39)/2 = 34.5, dst.<br>Mean = (4×34.5 + 6×44.5)/10';
            } else if (ukuran === 'median') {
                judul = 'Penjelasan Median';
                isi = (jenis === 'tunggal') ?
                    '<b>Rumus:</b> Median = data ke-(n+1)/2 (jika n ganjil)<br>atau rata-rata dua data tengah (jika n genap)<br><b>Langkah:</b> Urutkan data → tentukan posisi tengah → ambil nilai tengah/dua tengah<br><b>Contoh:</b> Data: 6,7,8,9,10 → Median = 8' :
                    '<b>Rumus:</b> Median kelompok = L + [(n/2 - F) / f ] × p<br><b>Langkah:</b> Buat kumulatif fi → tentukan kelas median (kumulatif ≥ n/2) → substitusi L,F,f,p<br><b>Keterangan:</b> L = tepi bawah kelas median, F = kumulatif sebelum kelas median, f = frek kelas median, p = panjang kelas';
            } else if (ukuran === 'modus') {
                judul = 'Penjelasan Modus';
                isi = (jenis === 'tunggal') ?
                    '<b>Rumus:</b> Modus = nilai yang paling sering muncul<br><b>Langkah:</b> Hitung frekuensi tiap nilai → pilih frekuensi tertinggi<br><b>Contoh:</b> Data: 6,7,8,8,9,10 → Modus = 8' :
                    '<b>Rumus:</b> Modus kelompok ≈ kelas dengan frekuensi tertinggi (untuk pendekatan sederhana)';
            } else if (ukuran === 'jangkauan') {
                judul = 'Penjelasan Jangkauan';
                isi = (jenis === 'tunggal') ?
                    '<b>Rumus:</b> Jangkauan = data terbesar - data terkecil<br><b>Langkah:</b> Temukan max dan min → selisihkan<br><b>Contoh:</b> Data: 5,7,9,12,15 → 15 − 5 = 10' :
                    '<b>Rumus:</b> Jangkauan = batas atas kelas terakhir - batas bawah kelas pertama';
            } else if (ukuran === 'simpangan') {
                judul = 'Penjelasan Simpangan Rata-rata';
                isi = (jenis === 'tunggal') ?
                    '<b>Rumus:</b> Simpangan Rata-rata = Σ|xi - mean| / n<br><b>Langkah:</b> Hitung mean → hitung selisih absolut tiap data → rata-ratakan<br><b>Contoh:</b> Data: 5,7,9; Mean=7 → (2+0+2)/3 = 1.33' :
                    '<b>Rumus:</b> Simpangan Rata-rata = Σ|xi - mean| × fi / Σfi';
            } else if (ukuran === 'ragam') {
                judul = 'Penjelasan Ragam (Varians)';
                isi = (jenis === 'tunggal') ?
                    '<b>Rumus:</b> Ragam = Σ(xi - mean)² / n<br><b>Langkah:</b> Hitung mean → kuadratkan selisih tiap data → rata-ratakan<br><b>Contoh:</b> Data: 5,7,9; Mean=7 → (4+0+4)/3 = 2.67' :
                    '<b>Rumus:</b> Ragam = Σ(xi - mean)² × fi / Σfi';
            }
            document.getElementById('judulPenjelasan').innerHTML = judul;
            document.getElementById('isiPenjelasan').innerHTML = isi;
            document.getElementById('modal-bg').style.display = 'block';
            document.getElementById('modal-penjelasan').style.display = 'block';
        }

        function hidePenjelasan() {
            document.getElementById('modal-bg').style.display = 'none';
            document.getElementById('modal-penjelasan').style.display = 'none';
        }
        function isiContoh() {
            var jenis = document.getElementById('jenisData').value;
            if (jenis === 'tunggal') {
                document.getElementById('dataTunggal').value = '6,7,8,9,10';
            } else {
                var body = document.getElementById('tabelKelompok');
                // Reset ke 3 baris contoh
                body.innerHTML = '<tr><th>Kelas</th><th>Frekuensi</th></tr>' +
                    '<tr><td><input type="text" class="kelas-input" value="30-39"></td><td><input type="number" class="frek-input" value="4" min="0"></td></tr>' +
                    '<tr><td><input type="text" class="kelas-input" value="40-49"></td><td><input type="number" class="frek-input" value="6" min="0"></td></tr>' +
                    '<tr><td><input type="text" class="kelas-input" value="50-59"></td><td><input type="number" class="frek-input" value="8" min="0"></td></tr>' +
                    '<tr><td><input type="text" class="kelas-input" value="60-69"></td><td><input type="number" class="frek-input" value="12" min="0"></td></tr>' +
                    '<tr><td><input type="text" class="kelas-input" value="70-79"></td><td><input type="number" class="frek-input" value="9" min="0"></td></tr>';
            }
        }

        function resetFormKalkulator() {
            // Reset input sesuai jenis data yang aktif
            var jenis = document.getElementById('jenisData').value;
            if (jenis === 'tunggal') {
                document.getElementById('dataTunggal').value = '';
            } else {
                var body = document.getElementById('tabelKelompok');
                body.innerHTML = '<tr><th>Kelas</th><th>Frekuensi</th></tr>' +
                    '<tr><td><input type="text" class="kelas-input" placeholder="Contoh: 30-39"></td><td><input type="number" class="frek-input" min="0"></td></tr>' +
                    '<tr><td><input type="text" class="kelas-input" placeholder="Contoh: 40-49"></td><td><input type="number" class="frek-input" min="0"></td></tr>' +
                    '<tr><td><input type="text" class="kelas-input" placeholder="Contoh: 50-59"></td><td><input type="number" class="frek-input" min="0"></td></tr>';
            }
            document.getElementById('hasilKalkulator').innerText = '';
            document.getElementById('langkahKalkulator').innerHTML = '';
        }
    </script>
</body>

</html>